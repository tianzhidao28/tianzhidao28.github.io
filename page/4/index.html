<!DOCTYPE html><html lang="zh-Hans"><head><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]--><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="rocyuan"><meta name="baidu_union_verify" content="45f680d99ae7ce8598033814daea31eb"><meta name="keywords" content="rocyuan,袁,Java编程,Spring Struts,Webwork框架深入,XMLHTTP Ajax开发,Java,Web开发,Java企业应用,Java设计模式,Java开源框架,Java应用服务器,Rich Client讨论,Ruby编程"><meta name="description" content="rocyuan blog 是一个为哲学而生的博客，一切是为了艺术"><meta name="google-site-verification" content="VmInQfXsW7YHb75k4VWsFYgfCr16D-Lgh-yjUv1ofdc"><meta name="360-site-verification" content="0f3b6b19c5c09b2495b3cef3dfeb67f3"><meta property="og:type" content="website"><meta property="og:title" content="rocyuan"><meta property="og:url" content="http://www.rocyuan.com/page/4/index.html"><meta property="og:site_name" content="rocyuan"><meta property="og:locale" content="zh-Hans"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="rocyuan"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="alternative" href="/atom.xml" title="rocyuan" type="application/atom+xml"><link rel="shortcut icon" href="/favicon.ico"><link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet"><link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><style>.article{opacity:0}</style><link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><title>rocyuan</title><script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script>var yiliaConfig={fancybox:!0,animate:!0,isHome:!0,isPost:!1,isArchive:!1,isTag:!1,isCategory:!1,fancybox_js:"//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",scrollreveal:"//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",search:void 0}</script><script>yiliaConfig.jquery_ui=[!1]</script><script>yiliaConfig.rootUrl="/"</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?6d536bba51839c77757221f38ef8d935";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">window.BWEUM||(BWEUM={}),BWEUM.info={stand:!0,agentType:"browser",agent:"bi-collector.oneapm.com/static/js/bw-send-411.4.5.js",beaconUrl:"bi-collector.oneapm.com/beacon",licenseKey:"QVYVi~R3aJeUQyqR",applicationID:2284577}</script><script type="text/javascript" src="//bi-collector.oneapm.com/static/js/bw-loader-411.4.5.js"></script></head></html><body><div id="container"><div class="left-col"><div class="overlay"></div><div class="intrude-less"><header id="header" class="inner"><a href="/" class="profilepic"><img src="/img/avatar.png" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/">rocyuan</a></h1></hgroup><div id="switch-btn" class="switch-btn"><div class="icon"><div class="icon-ctn"><div class="icon-wrap icon-house" data-idx="0"><div class="birdhouse"></div><div class="birdhouse_holes"></div></div><div class="icon-wrap icon-ribbon hide" data-idx="1"><div class="ribbon"></div></div><div class="icon-wrap icon-link hide" data-idx="2"><div class="loopback_l"></div><div class="loopback_r"></div></div><div class="icon-wrap icon-me hide" data-idx="3"><div class="user"></div><div class="shoulder"></div></div></div></div><div class="tips-box hide"><div class="tips-arrow"></div><ul class="tips-inner"><li>菜单</li><li>标签</li><li>友情链接</li><li>关于我</li></ul></div></div><div id="switch-area" class="switch-area"><div class="switch-wrap"><section class="switch-part switch-part1"><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/随笔">随笔</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" href="mailto:admin@rocyuan.com" title="Email"></a> <a class="fa GitHub" href="http://github.com/tianzhidao28" title="GitHub"></a> <a class="fa V2EX" href="http://www.v2ex.com/member/tianzhidao28" title="V2EX"></a> <a class="fa RSS" href="/atom.xml" title="RSS"></a></ul></nav></section><section class="switch-part switch-part2"><div class="widget tagcloud" id="js-tagcloud"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/">IDEA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bitly/">bitly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog优化/">blog优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dubbo/">dubbo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/goo-gl/">goo.gl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpc/">rpc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service/">service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shopify/">shopify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/soa/">soa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tools/">tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wechat/">wechat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/weixin/">weixin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/团队效率/">团队效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信/">微信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/推广/">推广</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电商/">电商</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/短域名/">短域名</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/红包/">红包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/过年/">过年</a></li></ul></div></section><section class="switch-part switch-part3"><div id="js-friends"><a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a> <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a></div></section><section class="switch-part switch-part4"><div id="js-aboutme">黑暗中的引路人</div></section></div></div></header></div></div><div class="mid-col"><nav id="mobile-nav"><div class="overlay"><div class="slider-trigger"></div><h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">rocyuan</a></h1></div><div class="intrude-less"><header id="header" class="inner"><a href="/" class="profilepic"><img src="/img/avatar.png" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/" title="回到主页">rocyuan</a></h1></hgroup><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/随笔">随笔</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li><div class="clearfix"></div></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" target="_blank" href="mailto:admin@rocyuan.com" title="Email"></a> <a class="fa GitHub" target="_blank" href="http://github.com/tianzhidao28" title="GitHub"></a> <a class="fa V2EX" target="_blank" href="http://www.v2ex.com/member/tianzhidao28" title="V2EX"></a> <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a></ul></nav></header></div><link class="menu-list" tags="标签" friends="友情链接" about="关于我"></nav><div class="body-wrap"><article id="post-工具收录" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/工具收录.html" class="article-date"><time datetime="2016-07-02T06:05:00.000Z" itemprop="datePublished">2016-07-02</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/工具收录.html">工具收录</a></h1></header><div class="article-entry" itemprop="articleBody"><h2 id="Splinter"><a href="#Splinter" class="headerlink" title="Splinter"></a>Splinter</h2><blockquote><p><em>是什么</em>：</p></blockquote><p>Splinter是一个自动化测试网络应用的Python库。</p><blockquote><p>为什么需要它：</p></blockquote><p>大家都知道，没有什么比自动化网络应用测试更无聊的事了。有了Splinter，就可以将打开浏览器、输入URL、填写表单、点击按钮等全部操作自动化。</p><p>特定的浏览器需要使用相应的驱动器（drivers），不过还好已经自带了Chrome和Firefox驱动器。另外，Splinter还可以通过Selenium Remote来远程控制其他机器上的浏览器。你甚至可以在目标浏览器中手动执行JavaScript代码。</p><p>如果你想知道某个浏览器在浏览指定网站时的具体情况，那么Splinter将是一个很有用的工具。如果想了解不依赖浏览器与网站进行交互，可以查看Twill。(译者：Twill是一种脚本语言，支持用户通过命令行浏览网络。)</p><h2 id="资源监控工具-glances"><a href="#资源监控工具-glances" class="headerlink" title="资源监控工具 glances"></a>资源监控工具 glances</h2><blockquote><p>glances 是一款用于 Linux、BSD 的开源命令行系统监视工具，它使用 Python 语言开发，能够监视 CPU、负载、内存、磁盘 I/O、网络流量、文件系统、系统温度等信息。本文介绍 glances 的使用方法和技巧，帮助 Linux 系统管理员了解掌握服务器性能</p></blockquote><p><img src="http://img2.tuicool.com/R3yQ7b.png!web" alt=""></p><ul><li>glances 可以为 Unix 和 Linux 性能专家提供监视和分析性能数据的功能，其中包括：</li><li>CPU 使用率</li><li>内存使用情况</li><li>内核统计信息和运行队列信息</li><li>磁盘 I/O 速度、传输和读/写比率</li><li>文件系统中的可用空间</li><li>磁盘适配器</li><li>网络 I/O 速度、传输和读/写比率</li><li>页面空间和页面速度</li><li>消耗资源最多的进程</li><li>计算机信息和系统资源</li></ul><blockquote><p>glances 工具可以在用户的终端上实时显示重要的系统信息，并动态地对其进行更新。这个高效的工具可以工作于任何终端屏幕。另外它并不会消耗大量的 CPU 资源，通常低于百分之二。glances 在屏幕上对数据进行显示，并且每隔两秒钟对其进行更新。您也可以自己将这个时间间隔更改为更长或更短的数值。glances 工具还可以将相同的数据捕获到一个文件，便于以后对报告进行分析和绘制图形。输出文件可以是电子表格的格式 (.csv) 或者 html 格式。</p></blockquote><h2 id="speedtest-cli"><a href="#speedtest-cli" class="headerlink" title="speedtest-cli"></a>speedtest-cli</h2><blockquote><p>命令行下测试服务器外网速度 <a href="https://github.com/sivel/speedtest-cli" target="_blank" rel="external">https://github.com/sivel/speedtest-cli</a></p></blockquote><h2 id="ImageOptim"><a href="#ImageOptim" class="headerlink" title="ImageOptim"></a>ImageOptim</h2><blockquote><p>好用的图片压缩工具 <a href="https://github.com/sivel/speedtest-cli" target="_blank" rel="external">https://github.com/sivel/speedtest-cli</a></p></blockquote><h2 id="iStat"><a href="#iStat" class="headerlink" title="iStat"></a>iStat</h2><p><img src="http://cdn.sspai.com/attachment/thumbnail/2014/09/12/431393e862a8ba6fe1f99161821d930c2b3d1_mw_800_wm_1_wmp_3.jpg" alt=""></p><p><img src="http://cdn.sspai.com/attachment/thumbnail/2014/09/12/15755700c117da2eed69502ab5d5ff132b3d2_mw_800_wm_1_wmp_3.jpg" alt=""></p></div><div class="article-info article-info-index"><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tools/">tools</a></li></ul></div><div class="clearfix"></div></div></div></article><article id="post-Blog优化设置" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/Blog优化设置.html" class="article-date"><time datetime="2016-06-30T17:20:20.000Z" itemprop="datePublished">2016-07-01</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/Blog优化设置.html">Blog优化设置</a></h1></header><div class="article-entry" itemprop="articleBody"><h2 id="百度云加速网站"><a href="#百度云加速网站" class="headerlink" title="百度云加速网站"></a>百度云加速网站</h2><ul><li><a href="http://su.baidu.com/" target="_blank" rel="external">http://su.baidu.com/</a></li></ul></div><div class="article-info article-info-index"><div class="clearfix"></div></div></div></article><article id="post-IDEA2016-1版激活-亲测" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/IDEA2016-1版激活-亲测.html" class="article-date"><time datetime="2016-06-30T06:29:00.000Z" itemprop="datePublished">2016-06-30</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/IDEA2016-1版激活-亲测.html">IDEA2016.1版激活(亲测)</a></h1></header><div class="article-entry" itemprop="articleBody"><blockquote><p>IDEA 2016.1</p></blockquote><p><a href="http://idea.qinxi1992.cn" target="_blank" rel="external">http://idea.qinxi1992.cn</a></p></div><div class="article-info article-info-index"><div class="article-category tagcloud"><a class="article-category-link" href="/categories/工具/">工具</a></div><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IDEA/">IDEA</a></li></ul></div><div class="clearfix"></div></div></div></article><article id="post-mysqldump" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/mysqldump.html" class="article-date"><time datetime="2016-06-30T05:25:16.000Z" itemprop="datePublished">2016-06-30</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/mysqldump.html">mysqldump</a></h1></header><div class="article-entry" itemprop="articleBody"><h2 id="mysqldump-参数"><a href="#mysqldump-参数" class="headerlink" title="mysqldump 参数"></a>mysqldump 参数</h2><ul><li>–no-autocommit</li><li>–no-set-names</li><li>-c, –complete-insert</li><li>–insert-ignore</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqldump  -uroot -p123456 -t stylrplusdb --tables shopify_product,shopify_product_image,shopify_product_options,shopify_product_variant --compact  -c --no-autocommit --insert-ignore -N &gt;&gt; newTable.sql</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysqldump -uroot -p123456 test -d --compact --no-autocommit</div><div class="line"></div><div class="line">mysqldump -uroot -p123456 test -t --compact  -c --no-autocommit --insert-ignore -N</div></pre></td></tr></table></figure></div><div class="article-info article-info-index"><div class="clearfix"></div></div></div></article><article id="post-S-Shell中断信号" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/S-Shell中断信号.html" class="article-date"><time datetime="2016-06-29T14:51:00.000Z" itemprop="datePublished">2016-06-29</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/S-Shell中断信号.html">[S]Shell中断信号</a></h1></header><div class="article-entry" itemprop="articleBody"><h2 id="信号常量"><a href="#信号常量" class="headerlink" title="信号常量"></a>信号常量</h2><ul><li>SIGHUP 终止进程 终端线路挂断</li><li>SIGINT 终止进程 中断进程</li><li>SIGQUIT 建立CORE文件 终止进程，并且生成core文件</li><li>SIGILL 建立CORE文件 非法指令</li><li>SIGTRAP 建立CORE文件 跟踪自陷</li><li>SIGBUS 建立CORE文件 总线错误</li><li>SIGSEGV 建立CORE文件 段非法错误</li><li>SIGFPE 建立CORE文件 浮点异常</li><li>SIGIOT 建立CORE文件 执行I/O自陷</li><li>SIGKILL 终止进程 杀死进程</li><li>SIGPIPE 终止进程 向一个没有读进程的管道写数据</li><li>SIGALARM 终止进程 计时器到时</li><li>SIGTERM 终止进程 软件终止信号</li><li>SIGSTOP 停止进程 非终端来的停止信号</li><li>SIGTSTP 停止进程 终端来的停止信号</li><li>SIGCONT 忽略信号 继续执行一个停止的进程</li><li>SIGURG 忽略信号 I/O紧急信号</li><li>SIGIO 忽略信号 描述符上可以进行I/O</li><li>SIGCHLD 忽略信号 当子进程停止或退出时通知父进程</li><li>SIGTTOU 停止进程 后台进程写终端</li><li>SIGTTIN 停止进程 后台进程读终端</li><li>SIGXGPU 终止进程 CPU时限超时</li><li>SIGXFSZ 终止进程 文件长度过长</li><li>SIGWINCH 忽略信号 窗口大小发生变化</li><li>SIGPROF 终止进程 统计分布图用计时器到时</li><li>SIGUSR1 终止进程 用户定义信号1</li><li>SIGUSR2 终止进程 用户定义信号2</li><li>SIGVTALRM 终止进程 虚拟计时器到时</li></ul><blockquote><p>在Bash下调用信号的方法为：<br>代码:<br>trap command/function sig1 sig2 …</p></blockquote></div><div class="article-info article-info-index"><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul></div><div class="clearfix"></div></div></div></article><article id="post-WorkLog20160629" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/WorkLog20160629.html" class="article-date"><time datetime="2016-06-29T09:46:00.000Z" itemprop="datePublished">2016-06-29</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/WorkLog20160629.html">WorkLog20160629</a></h1></header><div class="article-entry" itemprop="articleBody"><h2 id="2016-06-29-17-33-变更记录"><a href="#2016-06-29-17-33-变更记录" class="headerlink" title="2016-06-29 17:33 变更记录"></a>2016-06-29 17:33 变更记录</h2><ul><li>1 将正式服务器的数据dump到本地</li><li>2 以本地测试数据库的表结构为准 导入正式数据(新增了一批商家产品数据表服务之类,完全兼容旧的产品)</li><li>3 导出数据 同步到 正式数据库</li><li>4 TO-DO-LATER<ul><li>全局缓存的设定感觉有问题</li><li>在git上配一个webhook提示提交记录</li></ul></li></ul><h3 id="Command-List-Help"><a href="#Command-List-Help" class="headerlink" title="Command List Help"></a>Command List Help</h3><blockquote><p>120M的文件几秒即可</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqldump  -uroot -p123456 -h127.0.0.1 testdb --compact  --complete-insert --no-autocommit &gt;&gt; backup20160628.sql</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp root@123.23.2.3:~/backup20160628.sql .</div></pre></td></tr></table></figure><hr><blockquote><p>用此命令执行</p><ul><li>mysql&gt; source data.sql（<code>推荐</code>）</li><li>mysql -uroot -p123456 stydb -N -f &lt;&lt; data.sql (可能sql文件语法问题报错)</li></ul><p>Use</p></blockquote><ul><li>只有 create table</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -uroot -p123456 -d xxxusdb --tables shopify_product shopify_product_image shopify_product_options shopify_product_variant --compact  --complete-insert --no-autocommit &gt;&gt; newTable.sql</div></pre></td></tr></table></figure><ul><li>只有 data</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqldump  -uroot -p123456 -t xxxxsdb --tables shopify_product shopify_product_image shopify_product_options shopify_product_variant --compact  --complete-insert --no-autocommit &gt;&gt; newTable.sql</div></pre></td></tr></table></figure></div><div class="article-info article-info-index"><div class="clearfix"></div></div></div></article><article id="post-转-Springboot常用配置" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/转-Springboot常用配置.html" class="article-date"><time datetime="2016-06-28T17:14:00.000Z" itemprop="datePublished">2016-06-29</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/转-Springboot常用配置.html">[转]Springboot常用配置</a></h1></header><div class="article-entry" itemprop="articleBody"><blockquote><p>springboot 配置</p></blockquote><h2 id="mvc"><a href="#mvc" class="headerlink" title="mvc"></a>mvc</h2><ul><li><code>spring.mvc.async.request-timeout</code><br>设定async请求的超时时间，以毫秒为单位，如果没有设置的话，以具体实现的超时时间为准，比如tomcat的servlet3的话是10秒.</li><li><code>spring.mvc.date-format</code><br>设定日期的格式，比如dd/MM/yyyy.</li><li><code>spring.mvc.favicon.enabled</code><br>是否支持favicon.ico，默认为: true</li><li><code>spring.mvc.ignore-default-model-on-redirect</code><br>在重定向时是否忽略默认model的内容，默认为true</li><li><code>spring.mvc.locale</code><br>指定使用的Locale.</li><li><code>spring.mvc.message-codes-resolver-format</code><br>指定message codes的格式化策略(PREFIX_ERROR_CODE,POSTFIX_ERROR_CODE).</li><li><code>spring.mvc.view.prefix</code><br>指定mvc视图的前缀.</li><li><code>spring.mvc.view.suffix</code><br>指定mvc视图的后缀.</li></ul><h2 id="messages"><a href="#messages" class="headerlink" title="messages"></a>messages</h2><ul><li><code>spring.messages.basename</code><br>指定message的basename，多个以逗号分隔，如果不加包名的话，默认从classpath路径开始，默认: messages</li><li><code>spring.messages.cache-seconds</code><br>设定加载的资源文件缓存失效时间，-1的话为永不过期，默认为-1</li><li><code>spring.messages.encoding</code><br>设定Message bundles的编码，默认: UTF-8</li></ul><h2 id="mobile"><a href="#mobile" class="headerlink" title="mobile"></a>mobile</h2><ul><li><code>spring.mobile.devicedelegatingviewresolver.enable-fallback</code><br>是否支持fallback的解决方案，默认false</li><li><code>spring.mobile.devicedelegatingviewresolver.enabled</code><br>是否开始device view resolver，默认为: false</li><li><code>spring.mobile.devicedelegatingviewresolver.mobile-prefix</code><br>设定mobile端视图的前缀，默认为:mobile/</li><li><code>spring.mobile.devicedelegatingviewresolver.mobile-suffix</code><br>设定mobile视图的后缀</li><li><code>spring.mobile.devicedelegatingviewresolver.normal-prefix</code><br>设定普通设备的视图前缀</li><li><code>spring.mobile.devicedelegatingviewresolver.normal-suffix</code><br>设定普通设备视图的后缀</li><li><code>spring.mobile.devicedelegatingviewresolver.tablet-prefix</code><br>设定平板设备视图前缀，默认:tablet/</li><li><code>spring.mobile.devicedelegatingviewresolver.tablet-suffix</code><br>设定平板设备视图后缀.</li><li><code>spring.mobile.sitepreference.enabled</code><br>是否启用SitePreferenceHandler，默认为: true</li></ul><h2 id="view"><a href="#view" class="headerlink" title="view"></a>view</h2><ul><li><code>spring.view.prefix</code><br>设定mvc视图的前缀.</li><li><code>spring.view.suffix</code><br>设定mvc视图的后缀.</li></ul><h2 id="resource"><a href="#resource" class="headerlink" title="resource"></a>resource</h2><ul><li><code>spring.resources.add-mappings</code><br>是否开启默认的资源处理，默认为true</li><li><code>spring.resources.cache-period</code><br>设定资源的缓存时效，以秒为单位.</li><li><code>spring.resources.chain.cache</code><br>是否开启缓存，默认为: true</li><li><code>spring.resources.chain.enabled</code><br>是否开启资源 handling chain，默认为false</li><li><code>spring.resources.chain.html-application-cache</code><br>是否开启h5应用的cache manifest重写，默认为: false</li><li><code>spring.resources.chain.strategy.content.enabled</code><br>是否开启内容版本策略，默认为false</li><li><code>spring.resources.chain.strategy.content.paths</code><br>指定要应用的版本的路径，多个以逗号分隔，默认为:[/**]</li><li><code>spring.resources.chain.strategy.fixed.enabled</code><br>是否开启固定的版本策略，默认为false</li><li><code>spring.resources.chain.strategy.fixed.paths</code><br>指定要应用版本策略的路径，多个以逗号分隔</li><li><code>spring.resources.chain.strategy.fixed.version</code><br>指定版本策略使用的版本号</li><li><code>spring.resources.static-locations</code><br>指定静态资源路径，默认为classpath:[/META-INF/resources/,/resources/, /static/, /public/]以及context:/</li></ul><h2 id="multipart"><a href="#multipart" class="headerlink" title="multipart"></a>multipart</h2><ul><li><code>multipart.enabled</code><br>是否开启文件上传支持，默认为true</li><li><code>multipart.file-size-threshold</code><br>设定文件写入磁盘的阈值，单位为MB或KB，默认为0</li><li><code>multipart.location</code><br>指定文件上传路径.</li><li><code>multipart.max-file-size</code><br>指定文件大小最大值，默认1MB</li><li><code>multipart.max-request-size</code><br>指定每次请求的最大值，默认为10MB</li></ul><h2 id="freemarker"><a href="#freemarker" class="headerlink" title="freemarker"></a>freemarker</h2><ul><li><code>spring.freemarker.allow-request-override</code><br>指定HttpServletRequest的属性是否可以覆盖controller的model的同名项</li><li><code>spring.freemarker.allow-session-override</code><br>指定HttpSession的属性是否可以覆盖controller的model的同名项</li><li><code>spring.freemarker.cache</code><br>是否开启template caching.</li><li><code>spring.freemarker.charset</code><br>设定Template的编码.</li><li><code>spring.freemarker.check-template-location</code><br>是否检查templates路径是否存在.</li><li><code>spring.freemarker.content-type</code><br>设定Content-Type.</li><li><code>spring.freemarker.enabled</code><br>是否允许mvc使用freemarker.</li><li><code>spring.freemarker.expose-request-attributes</code><br>设定所有request的属性在merge到模板的时候，是否要都添加到model中.</li><li><code>spring.freemarker.expose-session-attributes</code><br>设定所有HttpSession的属性在merge到模板的时候，是否要都添加到model中.</li><li><code>spring.freemarker.expose-spring-macro-helpers</code><br>设定是否以springMacroRequestContext的形式暴露RequestContext给Spring’s macro library使用</li><li><code>spring.freemarker.prefer-file-system-access</code><br>是否优先从文件系统加载template，以支持热加载，默认为true</li><li><code>spring.freemarker.prefix</code><br>设定freemarker模板的前缀.</li><li><code>spring.freemarker.request-context-attribute</code><br>指定RequestContext属性的名.</li><li><code>spring.freemarker.settings</code><br>设定FreeMarker keys.</li><li><code>spring.freemarker.suffix</code><br>设定模板的后缀.</li><li><code>spring.freemarker.template-loader-path</code><br>设定模板的加载路径，多个以逗号分隔，默认: [“classpath:/templates/“]</li><li><code>spring.freemarker.view-names</code><br>指定使用模板的视图列表.</li></ul><h2 id="velocity"><a href="#velocity" class="headerlink" title="velocity"></a>velocity</h2><ul><li><code>spring.velocity.allow-request-override</code><br>指定HttpServletRequest的属性是否可以覆盖controller的model的同名项</li><li><code>spring.velocity.allow-session-override</code><br>指定HttpSession的属性是否可以覆盖controller的model的同名项</li><li><code>spring.velocity.cache</code><br>是否开启模板缓存</li><li><code>spring.velocity.charset</code><br>设定模板编码</li><li><code>spring.velocity.check-template-location</code><br>是否检查模板路径是否存在.</li><li><code>spring.velocity.content-type</code><br>设定ContentType的值</li><li><code>spring.velocity.date-tool-attribute</code><br>设定暴露给velocity上下文使用的DateTool的名</li><li><code>spring.velocity.enabled</code><br>设定是否允许mvc使用velocity</li><li><code>spring.velocity.expose-request-attributes</code><br>是否在merge模板的时候，将request属性都添加到model中</li><li><code>spring.velocity.expose-session-attributes</code><br>是否在merge模板的时候，将HttpSession属性都添加到model中</li><li><code>spring.velocity.expose-spring-macro-helpers</code><br>设定是否以springMacroRequestContext的名来暴露RequestContext给Spring’s macro类库使用</li><li><code>spring.velocity.number-tool-attribute</code><br>设定暴露给velocity上下文的NumberTool的名</li><li><code>spring.velocity.prefer-file-system-access</code><br>是否优先从文件系统加载模板以支持热加载，默认为true</li><li><code>spring.velocity.prefix</code><br>设定velocity模板的前缀.</li><li><code>spring.velocity.properties</code><br>设置velocity的额外属性.</li><li><code>spring.velocity.request-context-attribute</code><br>设定RequestContext attribute的名.</li><li><code>spring.velocity.resource-loader-path</code><br>设定模板路径，默认为: classpath:/templates/</li><li><code>spring.velocity.suffix</code><br>设定velocity模板的后缀.</li><li><code>spring.velocity.toolbox-config-location</code><br>设定Velocity Toolbox配置文件的路径，比如 /WEB-INF/toolbox.xml.</li><li><code>spring.velocity.view-names</code><br>设定需要解析的视图名称.</li></ul><h2 id="thymeleaf"><a href="#thymeleaf" class="headerlink" title="thymeleaf"></a>thymeleaf</h2><ul><li><code>spring.thymeleaf.cache</code><br>是否开启模板缓存，默认true</li><li><code>spring.thymeleaf.check-template-location</code><br>是否检查模板路径是否存在，默认true</li><li><code>spring.thymeleaf.content-type</code><br>指定Content-Type，默认为: text/html</li><li><code>spring.thymeleaf.enabled</code><br>是否允许MVC使用Thymeleaf，默认为: true</li><li><code>spring.thymeleaf.encoding</code><br>指定模板的编码，默认为: UTF-8</li><li><code>spring.thymeleaf.excluded-view-names</code><br>指定不使用模板的视图名称，多个以逗号分隔.</li><li><code>spring.thymeleaf.mode</code><br>指定模板的模式，具体查看StandardTemplateModeHandlers，默认为: HTML5</li><li><code>spring.thymeleaf.prefix</code><br>指定模板的前缀，默认为:classpath:/templates/</li><li><code>spring.thymeleaf.suffix</code><br>指定模板的后缀，默认为:.html</li><li><code>spring.thymeleaf.template-resolver-order</code><br>指定模板的解析顺序，默认为第一个.</li><li><code>spring.thymeleaf.view-names</code><br>指定使用模板的视图名，多个以逗号分隔.</li></ul><h2 id="mustcache"><a href="#mustcache" class="headerlink" title="mustcache"></a>mustcache</h2><ul><li><code>spring.mustache.cache</code><br>是否Enable template caching.</li><li><code>spring.mustache.charset</code><br>指定Template的编码.</li><li><code>spring.mustache.check-template-location</code><br>是否检查默认的路径是否存在.</li><li><code>spring.mustache.content-type</code><br>指定Content-Type.</li><li><code>spring.mustache.enabled</code><br>是否开启mustcache的模板支持.</li><li><code>spring.mustache.prefix</code><br>指定模板的前缀，默认: classpath:/templates/</li><li><code>spring.mustache.suffix</code><br>指定模板的后缀，默认: .html</li><li><code>spring.mustache.view-names</code><br>指定要使用模板的视图名.</li></ul><h2 id="groovy模板"><a href="#groovy模板" class="headerlink" title="groovy模板"></a>groovy模板</h2><ul><li><code>spring.groovy.template.allow-request-override</code><br>指定HttpServletRequest的属性是否可以覆盖controller的model的同名项</li><li><code>spring.groovy.template.allow-session-override</code><br>指定HttpSession的属性是否可以覆盖controller的model的同名项</li><li><code>spring.groovy.template.cache</code><br>是否开启模板缓存.</li><li><code>spring.groovy.template.charset</code><br>指定Template编码.</li><li><code>spring.groovy.template.check-template-location</code><br>是否检查模板的路径是否存在.</li><li><code>spring.groovy.template.configuration.auto-escape</code><br>是否在渲染模板时自动排查model的变量，默认为: false</li><li><code>spring.groovy.template.configuration.auto-indent</code><br>是否在渲染模板时自动缩进，默认为false</li><li><code>spring.groovy.template.configuration.auto-indent-string</code><br>如果自动缩进启用的话，是使用SPACES还是TAB，默认为: SPACES</li><li><code>spring.groovy.template.configuration.auto-new-line</code><br>渲染模板时是否要输出换行，默认为false</li><li><code>spring.groovy.template.configuration.base-template-class</code><br>指定template base class.</li><li><code>spring.groovy.template.configuration.cache-templates</code><br>是否要缓存模板，默认为true</li><li><code>spring.groovy.template.configuration.declaration-encoding</code><br>在写入declaration header时使用的编码</li><li><code>spring.groovy.template.configuration.expand-empty-elements</code><br>是使用<br>这种形式，还是<br><br>这种展开模式，默认为: false)</li><li><code>spring.groovy.template.configuration.locale</code><br>指定template locale.</li><li><code>spring.groovy.template.configuration.new-line-string</code><br>当启用自动换行时，换行的输出，默认为系统的line.separator属性的值</li><li><code>spring.groovy.template.configuration.resource-loader-path</code><br>指定groovy的模板路径，默认为classpath:/templates/</li><li><code>spring.groovy.template.configuration.use-double-quotes</code><br>指定属性要使用双引号还是单引号，默认为false</li><li><code>spring.groovy.template.content-type</code><br>指定Content-Type.</li><li><code>spring.groovy.template.enabled</code><br>是否开启groovy模板的支持.</li><li><code>spring.groovy.template.expose-request-attributes</code><br>设定所有request的属性在merge到模板的时候，是否要都添加到model中.</li><li><code>spring.groovy.template.expose-session-attributes</code><br>设定所有request的属性在merge到模板的时候，是否要都添加到model中.</li><li><code>spring.groovy.template.expose-spring-macro-helpers</code><br>设定是否以springMacroRequestContext的形式暴露RequestContext给Spring’s macro library使用</li><li><code>spring.groovy.template.prefix</code><br>指定模板的前缀.</li><li><code>spring.groovy.template.request-context-attribute</code><br>指定RequestContext属性的名.</li><li><code>spring.groovy.template.resource-loader-path</code><br>指定模板的路径，默认为: classpath:/templates/</li><li><code>spring.groovy.template.suffix</code><br>指定模板的后缀</li><li><code>spring.groovy.template.view-names</code><br>指定要使用模板的视图名称.</li></ul><h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><ul><li><code>spring.hateoas.apply-to-primary-object-mapper</code><br>设定是否对object mapper也支持HATEOAS，默认为: true</li><li><code>spring.http.converters.preferred-json-mapper</code><br>是否优先使用JSON mapper来转换.</li><li><code>spring.http.encoding.charset</code><br>指定http请求和相应的Charset，默认: UTF-8</li><li><code>spring.http.encoding.enabled</code><br>是否开启http的编码支持，默认为true</li><li><code>spring.http.encoding.force</code><br>是否强制对http请求和响应进行编码，默认为true</li></ul><h2 id="json"><a href="#json" class="headerlink" title="json"></a>json</h2><ul><li><code>spring.jackson.date-format</code><br>指定日期格式，比如yyyy-MM-dd HH:mm:ss，或者具体的格式化类的全限定名</li><li><code>spring.jackson.deserialization</code><br>是否开启Jackson的反序列化</li><li><code>spring.jackson.generator</code><br>是否开启json的generators.</li><li><code>spring.jackson.joda-date-time-format</code><br>指定Joda date/time的格式，比如yyyy-MM-dd HH:mm:ss). 如果没有配置的话，dateformat会作为backup</li><li><code>spring.jackson.locale</code><br>指定json使用的Locale.</li><li><code>spring.jackson.mapper</code><br>是否开启Jackson通用的特性.</li><li><code>spring.jackson.parser</code><br>是否开启jackson的parser特性.</li><li><code>spring.jackson.property-naming-strategy</code><br>指定PropertyNamingStrategy (CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES)或者指定PropertyNamingStrategy子类的全限定类名.</li><li><code>spring.jackson.serialization</code><br>是否开启jackson的序列化.</li><li><code>spring.jackson.serialization-inclusion</code><br>指定序列化时属性的inclusion方式，具体查看JsonInclude.Include枚举.</li><li><code>spring.jackson.time-zone</code><br>指定日期格式化时区，比如America/Los_Angeles或者GMT+10.</li></ul><h2 id="jersey"><a href="#jersey" class="headerlink" title="jersey"></a>jersey</h2><ul><li><code>spring.jersey.filter.order</code><br>指定Jersey filter的order，默认为: 0</li><li><code>spring.jersey.init</code><br>指定传递给Jersey的初始化参数.</li><li><code>spring.jersey.type</code><br>指定Jersey的集成类型，可以是servlet或者filter.</li></ul></div><div class="article-info article-info-index"><div class="article-category tagcloud"><a class="article-category-link" href="/categories/java/">java</a><a class="article-category-link" href="/categories/java/spring/">spring</a></div><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springboot/">springboot</a></li></ul></div><div class="clearfix"></div></div></div></article><article id="post-Java-ClassLoader加载机制与SOA优化" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/Java-ClassLoader加载机制与SOA优化.html" class="article-date"><time datetime="2016-06-26T12:56:54.000Z" itemprop="datePublished">2016-06-26</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/Java-ClassLoader加载机制与SOA优化.html">Java ClassLoader加载机制与SOA优化</a></h1></header><div class="article-entry" itemprop="articleBody"><h1 id="Java-ClassLoader-类加载-与-SOA后期优化"><a href="#Java-ClassLoader-类加载-与-SOA后期优化" class="headerlink" title="Java ClassLoader 类加载 与 SOA后期优化"></a>Java ClassLoader 类加载 与 SOA后期优化</h1><h2 id="现在见到的一些应用部署方式-我见到的"><a href="#现在见到的一些应用部署方式-我见到的" class="headerlink" title="现在见到的一些应用部署方式(我见到的)"></a>现在见到的一些应用部署方式(我见到的)</h2><p><code>只能说是我见到的这2种</code></p><ul><li>1 . mvn clean package 打成war 再丢到web容器</li><li>2 . mvn clean package 打成jar 直接运行(<code>这是我这一年才见到的这么粗暴的方式</code>),但也简单干脆,<br>最近看jetty 官网也逐渐感觉或许这是个不错的单应用选择吧</li></ul><p><img src="http://7xogqz.com1.z0.glb.clouddn.com/jetty_office.png" alt="jetty官网"></p><blockquote><p>Don’t deploy your application in Jetty, deploy Jetty in your application!</p></blockquote><p><code>use jetty as a http module,not a web container just a module of your application</code></p><hr><p>在一个大的系统砸碎成一片片的服务的后期,就会产生一大波妹子了, 不 , 一大波的服务s,<br>一般一个服务(以 java 为例)的组成是:</p><ul><li><code>一些公共jar</code>: spring-<strong>.jar , common-*.jar , db</strong>jar,cache**.jar <code>一般有个 大于 10M</code></li><li>一些公共rpc jar : eg:dubbo**.jar 或其他的jar</li><li>业务相关jar,class,resources<br>这些jar都是要加载在内存里的啊；</li></ul><blockquote><p>10个就重复10遍 <code>9 * 10M</code>(?)内存的浪费</p></blockquote><p>当然在 内存也就那点钱,<strong>摩尔定律</strong> 完全可以解决这个问题,</p><p><strong><em><code>能用钱解决的问题更本就不是问题</code></em></strong></p><p>到此结束！！！！<br>谢谢</p><p>朴素的劳动人民的品格教育我们,贪污浪费都是犯罪.<br>同时也见到有朋友公司有把公共的一部分jar抽离放在容器里共享的先例。</p><h2 id="question"><a href="#question" class="headerlink" title="question"></a>question</h2><ul><li>写在前面的话： 首先共享的前提是：大家都在运行在同一个进程里??<br>一个tomcat 或其他web容器也是可以多实例运行.??</li></ul><ul><li>[x] 要共享的话 jar应该放在哪里？直接丢在jdk安装目录里的lib 行不行，为啥子( <code>不行！！</code>)</li><li>[ ] 哪些是可以抽离去共享，大家都用的就可以共享吗</li></ul><h2 id="Java-Class-Loader简介"><a href="#Java-Class-Loader简介" class="headerlink" title="Java Class Loader简介"></a>Java Class Loader简介</h2><hr><p><img src="http://img.my.csdn.net/uploads/201104/10/0_1302447836COCZ.gif" alt="此处输入图片的描述"></p><hr><p><code>Bootstrp Class Loader</code> 加载过的jar是：jre/lib,jre/classses<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/**</span></div><div class="line"><span class="comment">   * bootstrap 加载的核心内裤</span></div><div class="line"><span class="comment">   */</span></div><div class="line">URL[] urls=sun.misc.Launcher.getBootstrapClassPath().getURLs();</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; urls.length; i++) &#123;</div><div class="line">    System.out.println(urls[i].toExternalForm());</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">file:/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/lib/resources.jar</div><div class="line">file:/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/lib/rt.jar</div><div class="line">file:/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/lib/sunrsasign.jar</div><div class="line">file:/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/lib/jsse.jar</div><div class="line">file:/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/lib/jce.jar</div><div class="line">file:/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/lib/charsets.jar</div><div class="line">file:/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/lib/jfr.jar</div><div class="line">file:/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/classes</div></pre></td></tr></table></figure><p><code>ExtClassLoader :</code> 加载的是jre\lib\ext 目录或者,参数 java.ext.dirs指定的目录</p><p><code>AppClassLoader :</code> 加载 classpath 指定的目录 ,我们自己写的Java文件一般默认就是这货加载的,</p><p><code>XXXXClassLoader :</code>自己定义加载类的classloader——&gt;parent = AppCLassLoader</p><h3 id="类加载机制"><a href="#类加载机制" class="headerlink" title="类加载机制"></a>类加载机制</h3><blockquote><p>向上委托,全部丢给你老大,你老大再丢给他的老大,当老大搞定不了了，就交给他小弟喽。。。直到你的直接领导也搞不定 就交给你去搞<br>全盘负责, 一旦某个classLoader决定加载一个类的时候,这个类用过的对象的那些类也由这个ClassLoader负责了..你用过的对象,别人怎么用(™D,这个世界那么多别人用过的对象…)。。。你自己统统搞定吧</p></blockquote><hr><p><img src="http://p.blog.csdn.net/images/p_blog_csdn_net/lovingprince/EntryImages/20090702/%E5%B9%BB%E7%81%AF%E7%89%878.PNG" alt="此处输入图片的描述"></p><hr><p>ClassLoader.java<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">@CallerSensitive</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> ClassLoader <span class="title">getParent</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (parent == <span class="keyword">null</span>)</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        SecurityManager sm = System.getSecurityManager();</div><div class="line">        <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</div><div class="line">            checkClassLoaderPermission(parent, Reflection.getCallerClass());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> parent;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"> <span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="keyword">boolean</span> resolve)</div><div class="line">        <span class="keyword">throws</span> ClassNotFoundException</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</div><div class="line">            <span class="comment">// First, check if the class has already been loaded</span></div><div class="line">            <span class="comment">// 检查是否被加载过</span></div><div class="line">            Class c = findLoadedClass(name);</div><div class="line">            <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">long</span> t0 = System.nanoTime();</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</div><div class="line">                        <span class="comment">// go daddy 丢给你爸爸去加载,递归下去 找你爷爷,....</span></div><div class="line">                        c = parent.loadClass(name, <span class="keyword">false</span>);</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="comment">// ExtClassLoader的 </span></div><div class="line">                        c = findBootstrapClassOrNull(name);</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</div><div class="line">                    <span class="comment">// ClassNotFoundException thrown if class not found</span></div><div class="line">                    <span class="comment">// from the non-null parent class loader</span></div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</div><div class="line">                    <span class="comment">// If still not found, then invoke findClass in order</span></div><div class="line">                    <span class="comment">// to find the class.</span></div><div class="line">                    <span class="keyword">long</span> t1 = System.nanoTime();</div><div class="line">                    c = findClass(name);</div><div class="line"></div><div class="line">                    <span class="comment">// this is the defining class loader; record the stats</span></div><div class="line">                    sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0);</div><div class="line">                    sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);</div><div class="line">                    sun.misc.PerfCounter.getFindClasses().increment();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (resolve) &#123;</div><div class="line">                resolveClass(c);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> c;</div><div class="line">        &#125;</div></pre></td></tr></table></figure><p></p><p>随手写了一段验证下 自定义的ClassLoader;得到的 父ClassLoader是ExtClassLoader ….<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">FileSystemClassLoader fileSystemClassLoader = new FileSystemClassLoader(&quot;/&quot;);</div><div class="line"></div><div class="line">System.out.println(&quot;classpath: &quot; + fileSystemClassLoader.getParent().toString());</div></pre></td></tr></table></figure><p></p><p>凭什么啊！ 从代码上也没看出指定父ClassLoader的地方,我艹<br>后留意到<br><code>@CallerSensitive</code><br>public final ClassLoader getParent()</p><p>这个鬼注解,<br>从Oracle官网找了一段话 依然没怎么看懂,,(有了解少少或看到相关人能看懂的说明,@我)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Guideline 9-9 / ACCESS-9: Safely invoke standard APIs that perform tasks using the immediate caller&apos;s class loader instance</div><div class="line">The following static methods perform tasks using the immediate caller&apos;s class loader:</div><div class="line"></div><div class="line">        java.lang.Class.forName</div><div class="line">        java.lang.Package.getPackage(s)</div><div class="line">        java.lang.Runtime.load</div><div class="line">        java.lang.Runtime.loadLibrary</div><div class="line">        java.lang.System.load</div><div class="line">        java.lang.System.loadLibrary</div><div class="line">        java.sql.DriverManager.deregisterDriver		</div><div class="line">        java.sql.DriverManager.getConnection</div><div class="line">        java.sql.DriverManager.getDriver(s)</div><div class="line">        java.util.logging.Logger.getAnonymousLogger</div><div class="line">        java.util.logging.Logger.getLogger</div><div class="line">        java.util.ResourceBundle.getBundle</div><div class="line"></div><div class="line">Methods such as these that vary their behavior according to the immediate caller&apos;s class are considered to be caller-sensitive, and should be annotated in code with the @CallerSensitive annotation [16].</div><div class="line"></div><div class="line">For example, System.loadLibrary(&quot;/com/foo/MyLib.so&quot;) uses the immediate caller&apos;s class loader to find and load the specified library. (Loading libraries enables a caller to make native method invocations.) Do not invoke this method on behalf of untrusted code, since untrusted code may not have the ability to load the same library using its own class loader instance. Do not invoke any of these methods using inputs provided by untrusted code, and do not propagate objects that are returned by these methods back to untrusted code.</div></pre></td></tr></table></figure><p>不纠结这个鬼了。</p><h3 id="Jetty-Web容器的-ClassLoader"><a href="#Jetty-Web容器的-ClassLoader" class="headerlink" title="Jetty Web容器的 ClassLoader :"></a>Jetty Web容器的 ClassLoader :</h3><p>每个web上下文（web应用和war文件）的普通配置是有自身的classloader，系统的classloader是它的父类。这是普通的java classloader的层次，但是servlet规范提出了负责的层次要求：</p><ol><li><p>在WEB-INF/lib和WEB-INF/classes中包含的类的加载优先级高于父classloader中的类。这和普通的java2的classloader加载动作相反。</p></li><li><p>像java.lang.String这样的系统类不会被WEB-INF/lib或者WEB-INF/classes中的类替代。不幸的是，servlet规范并没有清楚的规定哪些类是系统类，也没有清楚的指出javax类应该作为系统类</p></li><li><p>Server实现类应该对web应用和其他classloader不可见。不幸的是，servelt规范并没有规定什么是server class ，也没有清楚的指出像xerces parser 这样的common libraries应该作为实现类。</p></li></ol><p>具体的哪些jar 放在 jetty.home/XXX/lib 下 还是其他什么地方,看诸位的实验结果了…</p><p><code>(全是空口无凭)</code></p><hr><p><img src="http://7xogqz.com1.z0.glb.clouddn.com/qrcode_for_gh_ee75564456c8_430.jpg" alt="qrcode"></p><hr></div><div class="article-info article-info-index"><div class="clearfix"></div></div></div></article><article id="post-SOA的发展与毁灭" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/SOA的发展与毁灭.html" class="article-date"><time datetime="2016-06-26T12:40:00.000Z" itemprop="datePublished">2016-06-26</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/SOA的发展与毁灭.html">SOA的发展与毁灭</a></h1></header><div class="article-entry" itemprop="articleBody"><h1 id="SOA的发展与毁灭"><a href="#SOA的发展与毁灭" class="headerlink" title="SOA的发展与毁灭"></a>SOA的发展与毁灭</h1><h2 id="SOA-发展之路"><a href="#SOA-发展之路" class="headerlink" title="SOA 发展之路"></a>SOA 发展之路</h2><ul><li>dubbo plugin<ul><li>(1) dubbo + thrift（可以参照dubbo源码里关于RMI的实现继续优化） 与现有的thrift服务兼容管理的解决代码（已经可以使用）</li><li>(2)dubbo container: 监视所有dubbo服务的启动与关闭，用极光的监控系统发送通知消息</li><li>(3)dubbo+python+thrift:(未完成版)</li></ul></li></ul><h2 id="SOA一年后出现的问题的解决方案"><a href="#SOA一年后出现的问题的解决方案" class="headerlink" title="SOA一年后出现的问题的解决方案"></a>SOA一年后出现的问题的解决方案</h2><p><a href="http://www.v2ex.com/t/243773#reply0" target="_blank" rel="external">http://www.v2ex.com/t/243773#reply0</a></p><h2 id="SOA升级与抛弃-3-10年内的解决方案与思路"><a href="#SOA升级与抛弃-3-10年内的解决方案与思路" class="headerlink" title="SOA升级与抛弃  3-10年内的解决方案与思路"></a>SOA升级与抛弃 3-10年内的解决方案与思路</h2><p><a href="https://www.zybuluo.com/tianzhidao28/note/382583" target="_blank" rel="external">https://www.zybuluo.com/tianzhidao28/note/382583</a></p></div><div class="article-info article-info-index"><div class="article-category tagcloud"><a class="article-category-link" href="/categories/dubbo/">dubbo</a></div><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dubbo/">dubbo</a></li></ul></div><div class="clearfix"></div></div></div></article><article id="post-SOA今天" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2016/SOA今天.html" class="article-date"><time datetime="2016-06-19T19:39:00.000Z" itemprop="datePublished">2016-06-20</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2016/SOA今天.html">快速书写dubbo服务 与 API项目</a></h1></header><div class="article-entry" itemprop="articleBody"><h1 id="快速书写dubbo服务-与-API项目"><a href="#快速书写dubbo服务-与-API项目" class="headerlink" title="快速书写dubbo服务 与 API项目"></a>快速书写dubbo服务 与 API项目</h1><h2 id="what"><a href="#what" class="headerlink" title="what"></a>what</h2><blockquote><p>这是 一个用来快速生成dubbo项目或者 使用dubbo来些 api的模版项目, 可以帮你节约<code>80%</code>的开发时间</p></blockquote><h2 id="why"><a href="#why" class="headerlink" title="why"></a>why</h2><ul><li>1个命令帮你在<code>20秒</code>构件一个完整的项目,再也不用花时间去搭建项目，找各种依赖,里面还帮你自动 加入了developer-commons包,dubbo2.8.4,zk的包, dubbo的本地配置 和 正式的配置</li><li>子模块清晰明了的分模块结构 和 demo,让你即使不会dubbo 也可以快速完成你的业务服务</li><li>完善的打包方式。 考虑到各种情况, 此生成项目可以打出各种包，<ul><li>最小的jar,</li><li>包含所有jar文件的可执行jar包,</li><li>将jar文件和配置文件分开的压缩包(<code>推荐方式</code>)</li><li>可以让第三种方式快速发布的最小压缩包包</li></ul></li><li>完善的运行发布安装脚本<ul><li>一键发布接口的脚本</li><li>修复了dubbo官方脚本里在我们服务器出现的问题的,启动,暂停,重启脚本</li><li>配合我们现在使用的supervisor的启动服务脚本</li><li>还有一个本地发布脚本（需要配置免密登录,改写）</li></ul></li></ul><ul><li>最重的一点:<blockquote><p>里面有我引以为傲的 API异常码的一种设计思路,将 异常与APICode结合的设计思路, 少了你一些在API设计过程中的 if else 和校验之类的<code>杂质</code>出现在你的项目里，强烈推荐使用,demo或者说是这个模版项目的原型在<a href="http://*********/portal/portal-services" title="portal-service" target="_blank" rel="external">portal-service</a> ,源码在git@ssh-<em>**</em>.com:portal/portal-services.git</p></blockquote></li></ul><h2 id="how"><a href="#how" class="headerlink" title="how"></a>how</h2><ul><li>在终端下执行</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">mvn archetype:generate -DgroupId=cn.jpush -DartifactId=xx-service -Dpackage=你的包名  -DarchetypeVersion=1.0.0 -DarchetypeArtifactId=dubbox-service-archetype -DarchetypeGroupId=cn.jpush -DinteractiveMode=false</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> mvn archetype:generate -DgroupId=cn.jpush -DartifactId=xx-service -Dpackage=cn.jpush.xx  -DarchetypeVersion=1.0.0 -DarchetypeArtifactId=dubbox-service-archetype -DarchetypeGroupId=cn.jpush -DinteractiveMode=false</div></pre></td></tr></table></figure><ul><li><p>在IDE里面生成项目</p><p>IDEA:<br><img src="http://7xogqz.com1.z0.glb.clouddn.com/QQ20160128-1.png" alt="1"></p></li></ul><h2 id="end"><a href="#end" class="headerlink" title="end"></a>end</h2><p><img src="http://7xogqz.com1.z0.glb.clouddn.com/xxservice.png" alt="2"></p></div><div class="article-info article-info-index"><div class="article-category tagcloud"><a class="article-category-link" href="/categories/dubbo/">dubbo</a></div><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/api/">api</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dubbo/">dubbo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rpc/">rpc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/service/">service</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/soa/">soa</a></li></ul></div><div class="clearfix"></div></div></div></article><nav id="page-nav"><a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a></nav></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left"><i class="fa fa-copyright"></i> 2016-2017 rocyuan</div><div class="footer-right"><a href="http://github.com/tianzhidao28/" target="_blank" title="rocyuan">github</a> <a href="http://gdcainfo.miitbeian.gov.cn" target="_blank" title="神之梦">粤ICP备14066359号-1</a> admin by rocyuan <i class="fa fa-heart animated infinite pulse"></i></div></div><div class="visit"><span id="busuanzi_container_site_pv" style="display:none"><span id="site-visit">本站到访数: <span id="busuanzi_value_site_uv"></span> </span></span><span>, </span><span id="busuanzi_container_page_pv" style="display:none"><span id="page-visit">本页阅读量: <span id="busuanzi_value_page_pv"></span></span></span></div></div></footer></div><script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script><script>$(document).ready(function(){var a=window.navigator.userAgent.indexOf("iPad");if(a>-1||"none"===$(".left-col").css("display")){var c=["#9db3f4","#414141","#e5a859","#f5dfc6","#c084a0","#847e72","#cd8390","#996731"],e=Math.ceil(Math.random()*(c.length-1));$("body").css({"background-color":c[e],"background-size":"cover"})}else{var d=5,o="url(/background/bg-x.jpg)".replace(/x/gi,Math.ceil(Math.random()*d));$("body").css({background:o,"background-attachment":"fixed","background-size":"cover"})}})</script><script type="text/javascript">!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-79859573-1","auto"),ga("send","pageview")</script><div class="scroll" id="scroll"><a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a> <a href="#comments" onclick="load$hide()" title="查看评论"><i class="fa fa-comments-o"></i></a> <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a></div><script>var oOpenInNew={archives:".archive-article-title",miniArchives:"a.post-list-link",friends:"#js-friends a",socail:".social a"};for(var x in oOpenInNew)$(oOpenInNew[x]).attr("target","_blank")</script><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body>